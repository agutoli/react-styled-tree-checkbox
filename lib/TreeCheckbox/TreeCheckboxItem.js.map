{"version":3,"sources":["../../src/TreeCheckbox/TreeCheckboxItem.js"],"names":["TreeCheckboxItem","props","state","selectedValues","Set","collapsed","onToggleCollape","_onToggleCollape","bind","onChangeChildField","_onChangeChildField","onToggleSelectAll","_onToggleSelectAll","setState","target","checked","parseInt","value","event","node","clear","children","map","child","add","has","childLabelRenderer","showToggleArrow","showToggleText","isAllSelected","size","length","icon","rootLabelRenderer","renderChildren","React","PureComponent","propTypes","PropTypes","bool","showChanges","func","defaultProps"],"mappings":"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","file":"TreeCheckboxItem.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport ItemWrapper from './partials/ItemWrapper'\nimport CollapseText from './partials/CollapseText'\nimport ArrowCollapse from './partials/ArrowCollapse'\n\nimport InputCheckbox from './partials/InputCheckbox'\nimport RootNodeWrapper from './partials/RootNodeWrapper'\nimport ChildNodeWrapper from './partials/ChildNodeWrapper'\nimport ChildrenNodeWrapper from './partials/ChildrenNodeWrapper'\n\nimport rootLabelRenderer from './renderers/rootLabelRenderer'\nimport childLabelRenderer from './renderers/childLabelRenderer'\n\nclass TreeCheckboxItem extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      selectedValues: new Set([]),\n      collapsed: props.collapsed\n    }\n\n    this.onToggleCollape = this._onToggleCollape.bind(this)\n    this.onChangeChildField = this._onChangeChildField.bind(this)\n    this.onToggleSelectAll = this._onToggleSelectAll.bind(this)\n  }\n\n  _onToggleCollape() {\n    this.setState({\n      collapsed: !this.state.collapsed\n    })\n  }\n\n  _onChangeChildField({ target }) {\n    const { selectedValues } = this.state\n    selectedValues[target.checked ? 'add': 'delete'](parseInt(target.value))\n    this.setState({ selectedValues: new Set(selectedValues) })\n  }\n\n  _onToggleSelectAll(event) {\n    const { node } = this.props\n    const { selectedValues } = this.state\n\n    if (!event.target.checked) {\n      selectedValues.clear()\n    }\n\n    if (event.target.checked) {\n      node.children.map((child) => selectedValues.add(parseInt(child.value)))\n    }\n\n    this.setState({ selectedValues: new Set(selectedValues) })\n    this.props.onToggleSelectAll(event)\n  }\n\n  renderChildren(children) {\n    const { collapsed, selectedValues } = this.state\n    return (\n      <ChildrenNodeWrapper data-children-node-wrapper key=\"children-node-wrapper\">\n        {children.map((node) => (\n          <ChildNodeWrapper key={node.value} data-child-node-wrapper>\n            <InputCheckbox\n              value={node.value}\n              checked={selectedValues.has(node.value)}\n              id={`root-node-${node.value}`}\n              onChange={this.onChangeChildField} />\n            {this.props.childLabelRenderer(node)}\n          </ChildNodeWrapper>\n        ))}\n      </ChildrenNodeWrapper>\n    )\n  }\n\n  componentWillReceiveProps({ collapsed }) {\n    this.setState({ collapsed })\n  }\n\n  render() {\n    const { collapsed, selectedValues } = this.state\n    const {\n      node,\n      showToggleArrow,\n      showToggleText\n    } = this.props\n\n    const isAllSelected = selectedValues.size === node.children.length\n\n    return (\n      <ItemWrapper collapsed={collapsed}>\n        <RootNodeWrapper key={node.value} data-root-node-wrapper>\n          {showToggleArrow ? <ArrowCollapse collapsed={collapsed} onClick={this.onToggleCollape} /> : null}\n          <InputCheckbox\n            value={node.value}\n            checked={isAllSelected}\n            onChange={this.onToggleSelectAll} />\n          {node.icon ? <i className=\"tree-checkbox__icon\">{node.icon}</i> : null}\n          {this.props.rootLabelRenderer(node, this.props, {\n            onToggleCollape: this.onToggleCollape,\n            onToggleSelectAll: this.onToggleSelectAll\n          })}\n          <CollapseText\n            className=\"collapse-expand-menu\"\n            onClick={this.onToggleCollape}>\n            {showToggleText ? collapsed ? 'expand' : 'collapse': null}\n          </CollapseText>\n        </RootNodeWrapper>\n        {this.renderChildren(node.children)}\n      </ItemWrapper>\n    )\n  }\n}\n\nTreeCheckboxItem.propTypes = {\n  collapsed: PropTypes.bool,\n  showChanges: PropTypes.bool,\n  showToggleArrow: PropTypes.bool,\n  showToggleText: PropTypes.bool,\n  rootLabelRenderer: PropTypes.func,\n  childLabelRenderer: PropTypes.func,\n  onToggleSelectAll: PropTypes.func,\n}\n\nTreeCheckboxItem.defaultProps = {\n  rootLabelRenderer,\n  childLabelRenderer,\n  collapsed: false,\n  showChanges: true,\n  showToggleArrow: false,\n  showToggleText: false,\n  onToggleSelectAll: () => {}\n}\n\nexport default TreeCheckboxItem\n"]}